FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZTogM3NjYWxlLWFwYgppbWFnZTogZmVlZGhlbnJ5LzNzY2FsZS1hcGIKZGVzY3JpcHRpb246\
IFVubG9jayB0aGUgcG93ZXIgb2YgeW91ciBBUElzCmJpbmRhYmxlOiBGYWxzZQphc3luYzogb3B0\
aW9uYWwKbWV0YWRhdGE6CiAgZGlzcGxheU5hbWU6IDNTY2FsZQogIGNvbnNvbGUub3BlbnNoaWZ0\
LmlvL2ljb25DbGFzczogZmEgZmEtc3VwZXJwb3dlcnMKcGxhbnM6CiAgLSBuYW1lOiBkZWZhdWx0\
CiAgICBkZXNjcmlwdGlvbjogRGVwbG95IDNTY2FsZQogICAgZnJlZTogVHJ1ZQogICAgbWV0YWRh\
dGE6IHt9CiAgICBwYXJhbWV0ZXJzOgogICAgLSBuYW1lOiBUSFJFRVNDQUxFX0RPTUFJTgogICAg\
ICByZXF1aXJlZDogVHJ1ZQogICAgICBkZWZhdWx0OiAKICAgICAgdHlwZTogc3RyaW5nCiAgICAg\
IHRpdGxlOiAzU2NhbGUgZG9tYWluIG5hbWUsIGkuZS4gImV4YW1wbGUtYWRtaW4uM3NjYWxlLm5l\
dCIKICAgIC0gbmFtZTogVEhSRUVTQ0FMRV9BQ0NFU1NfVE9LRU4KICAgICAgcmVxdWlyZWQ6IFRy\
dWUKICAgICAgZGVmYXVsdDogCiAgICAgIHR5cGU6IHN0cmluZwogICAgICB0aXRsZTogM1NjYWxl\
IGFjY2VzcyB0b2tlbiAoaHR0cHM6Ly9zdXBwb3J0LjNzY2FsZS5uZXQvZG9jcy9hY2NvdW50cy90\
b2tlbnMjY3JlYXRpbmctYWNjZXNzLXRva2Vucyk="


COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
