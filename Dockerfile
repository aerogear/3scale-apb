FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.version"="0.1.0"
LABEL "com.redhat.apb.spec"=\
"bmFtZTogM3NjYWxlLWFwYgppbWFnZTogZmVlZGhlbnJ5LzNzY2FsZS1hcGIKZGVzY3JpcHRpb246\
ID4KICBVbmxvY2sgdGhlIHBvd2VyIG9mIHlvdXIgQVBJcy4gVGhpcyB3aWxsIGRlcGxveSBBcGlj\
YXN0IHRvIHlvdXIgT3BlbnNoaWZ0IGNsdXN0ZXIgYW5kIGNvbm5lY3QgCiAgaXQgdG8gYSBkZWRp\
Y2F0ZWQgUmVkaXMuIEZvciB0aGlzIHRvIGZ1bmN0aW9uIGNvcnJlY3RseSBpdCBuZWVkcyB0byBi\
ZSBjb25maWd1cmVkIHdpdGggYSB0b2tlbgogIGFuZCBkb21haW4gZm9yIHRoZSBhY2NvdW50IGl0\
IHNob3VsZCBwdWxsIGl0J3MgY29uZmlndXJhdGlvbiB2YWx1ZXMgZnJvbSAodXN1YWxseSBpbiAz\
c2NhbGUubmV0KS4KCiAgWW91IGNhbiBjcmVhdGUgYW4gYWNjb3VudCB3aXRoIDNzY2FsZS5uZXQg\
aGVyZTogaHR0cHM6Ly93d3cuM3NjYWxlLm5ldC9zaWdudXAvCmJpbmRhYmxlOiBGYWxzZQphc3lu\
Yzogb3B0aW9uYWwKdGFnczoKICAtIG1vYmlsZS1zZXJ2aWNlCm1ldGFkYXRhOgogIGRpc3BsYXlO\
YW1lOiAzU2NhbGUKICBjb25zb2xlLm9wZW5zaGlmdC5pby9pY29uQ2xhc3M6IGZhIGZhLXN1cGVy\
cG93ZXJzCiAgc2VydmljZU5hbWU6IDNzY2FsZQpwbGFuczoKICAtIG5hbWU6IGRlZmF1bHQKICAg\
IGRlc2NyaXB0aW9uOiBEZXBsb3kgM1NjYWxlCiAgICBmcmVlOiBUcnVlCiAgICBtZXRhZGF0YTog\
e30KICAgIHBhcmFtZXRlcnM6CiAgICAtIG5hbWU6IFRIUkVFU0NBTEVfRE9NQUlOCiAgICAgIHJl\
cXVpcmVkOiBUcnVlCiAgICAgIGRlZmF1bHQ6IAogICAgICB0eXBlOiBzdHJpbmcKICAgICAgdGl0\
bGU6IDNTY2FsZSBkb21haW4gbmFtZSwgaS5lLiAiZXhhbXBsZS1hZG1pbi4zc2NhbGUubmV0Igog\
ICAgLSBuYW1lOiBUSFJFRVNDQUxFX0FDQ0VTU19UT0tFTgogICAgICByZXF1aXJlZDogVHJ1ZQog\
ICAgICBkZWZhdWx0OiAKICAgICAgdHlwZTogc3RyaW5nCiAgICAgIHRpdGxlOiAzU2NhbGUgYWNj\
ZXNzIHRva2VuIChodHRwczovL3N1cHBvcnQuM3NjYWxlLm5ldC9kb2NzL2FjY291bnRzL3Rva2Vu\
cyNjcmVhdGluZy1hY2Nlc3MtdG9rZW5zKQogICAgLSBuYW1lOiBUSFJFRVNDQUxFX0VOQUJMRV9D\
T1JTCiAgICAgIHJlcXVpcmVkOiBUcnVlCiAgICAgIGRlZmF1bHQ6IFRydWUKICAgICAgdHlwZTog\
Ym9vbAogICAgICB0aXRsZTogRW5hYmxlIENPUlMgM1NjYWxlIHBsdWdpbj8KCg=="


COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
